<% provide :title, @type.pluralize.capitalize %>

<div class="hpanel">
  <div class="panel-heading hbuilt">
    <h1><%= @type.pluralize.capitalize %></h1>

    <div class="admin-destinations-type-select">
      <% (["destinations"] + Destination::TYPES).each_with_index do |type, i| %>
        <% unless i == 0 %>
          |
        <% end %>

        <% if @type == type.singularize %>
          <span><%= type.pluralize.capitalize %></span>
        <% else %>
          <%= link_to type.pluralize.capitalize, :"admin_#{type.pluralize}" %>
        <% end %>
      <% end %>
    </div>
  </div><!-- .panel-heading -->

  <div class="panel-body">
    <%= will_paginate @destinations %>
    <div class="row">
      <div class="col-xs-12 col-md-8">
        <% if @destinations.any? %>
          <table class="admin-destinations table table-striped">
            <thead>
              <tr>
                <% if @type == "destination" %>
                  <th class="admin-destination-type">Type</th>
                <% end %>
                <th class="admin-destination-name">Name</th>
                <% unless @type == "region" %>
                  <th class="admin-destination-parent">Parent</th>
                <% end %>
                <th class="admin-destination-code">Code</th>
              </tr>
            </thead>

            <tbody>
              <% @destinations.each do |destination| %>
                <tr>
                  <% if @type == "destination" %>
                    <td class="admin-destination-type">
                      <%= destination.type.to_s.capitalize %>
                    </td>
                  <% end %>
                  <td class="admin-destination-name"><%= destination.name %></td>
                  <% unless @type == "region" %>
                    <td class="admin-destination-parent">
                      <%= destination.parent_name %>
                    </td>
                  <% end %>
                  <td class="admin-destination-code"><%= destination.code %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
        <% else %>
          Nothing to display!
        <% end %>
      </div>
    </div>
    <%= will_paginate @destinations %>
  </div>
</div>
