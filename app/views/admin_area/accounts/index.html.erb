<% provide :title, "Accounts" %>

<% content_for :header_panel do %>
  <div class="panel-body">
    <h1>User accounts</h1>
    <%= link_to "Create New Account", new_invitation_path %>
  </div>
<% end %>

<%= render "shared/hpanel" do  %>
  <div class="panel-body">
    <div class="form-group col-xs-12 col-md-8">
      <input
        id="admin_accounts_table_filter"
        type="text"
        class="form-control"
        placeholder="Filter by name or email..."
        />
    </div>

    <div class="form-inline">
      <div class="form-group col-xs-12 col-md-4">

        <div class="radio">
          <label>
            <input
              checked
              name="admin_accounts_filter_onboarded"
              type="radio"
              value="all"
            />
            All
          </label>
        </div>

        <div class="radio">
          <label>
            <input
              name="admin_accounts_filter_onboarded"
              type="radio"
              value="onboarded"
            />
            Onboarded
          </label>
        </div>

        <div class="radio">
          <label>
            <input
              name="admin_accounts_filter_onboarded"
              type="radio"
              value="not_onboarded"
            />
            Not onboarded
          </label>
        </div>

      </div>
    </div>

    <table
      id="admin_accounts_table"
      class="accounts table table-striped"
      cellpadding="1"
      cellspacing="1"
    >
      <thead>
        <tr>
          <th>O?</th>
          <th class="sortable-column-header" >
            Email
            &nbsp;
            <!-- <i class={class} style={style} > </i> -->
          </th>
          <th class="sortable-column-header" >
            Name
            &nbsp;
            <!-- <i class={class} style={style} > </i> -->
          </th>
          <th class="sortable-column-header">
            Companion
            &nbsp;
            <!-- <i class={class} style={style} > </i> -->
          </th>
          <th class="sortable-column-header" >
            Signed up
            &nbsp;
            <!-- <i class={class} style={style} > </i> -->
          </th>
          <th class="sortable-column-header" >
            Last rec
            &nbsp;
            <!-- <i class={class} style={style} > </i> -->
          </th>
        </tr>
      </thead>
      <tbody id="admin_accounts_table_body">
        <% present_each @accounts do |account| %>
          <%= account.tr do %>
            <td>
              <% if account.onboarded? %>
                <i class="fa fa-check"> </i>
              <% end %>
            </td>
            <td><%= account.email %></td>
            <td><%= account.link_to_owner %></td>
            <td><%= account.link_to_companion %></td>
            <td><%= account.created_at %></td>
            <td><%= account.last_recommendations_at %></td>
          <% end %>
        <% end %>
      </tbody>
    </table>

    <%= link_to "Download User last recommendation statuses as CSV", download_user_status_csv_admin_accounts_path %>
  </div>
<% end %>
