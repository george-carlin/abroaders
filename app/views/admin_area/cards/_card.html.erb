<% present card do |card| %>
  <% model = card.model %>
  <%= content_tag_for(
    :tr,
    card.model,
    "data-bp":       model.product.bp,
    "data-bank":     model.product.bank_id,
    "data-currency": model.product.currency_id,
  ) do %>
    <td><%= AdminArea::CardProduct::Cell::Identifier.(card.model.product) %></td>
    <td><%= card.product_name %></td>
    <td class="card_status">
      <%= card.status %>
      <% if card.declined? %>
        <a href="#" data-toggle="tooltip" title="<%= card.decline_reason %>">
          <%= fa_icon "question" %>
        </a>
      <% end %>
    </td>
    <td class="card_recommended_at" data-text="<%= card.recommended_at_value %>">
      <%= card.recommended_at || "-" %>
    </td>
    <td class="card_seen_at">
      <%= card.seen_at || "-" %>
    </td>
    <td class="card_clicked_at">
      <%= card.clicked_at || "-" %>
    </td>
    <td class="card_applied_at" data-text="<%= card.applied_at_value %>">
      <%= card.applied_at || "-" %>
    </td>
    <td class="card_denied_at">
      <%= card.denied_at || "-" %>
    </td>
    <td class="card_declined_at">
      <%= card.declined_at || "-" %>
    </td>
    <td class="card_opened_at" data-text="<%= card.opened_at_value %>">
      <%= card.opened_at || "-" %>
    </td>
    <td class="card_closed_at" data-text="<%= card.closed_at_value %>">
      <%= card.closed_at || "-" %>
    </td>
    <td>
      <%= link_to 'Edit', edit_admin_card_path(card) %>
      <% if model.recommendation? %>
        <%= link_to(
          raw("&times;"),
          pull_admin_recommendation_path(model),
          data: {
            confirm: "Really pull this recommendation?",
            method: :patch,
            remote: true,
          },
          id:    "card_#{model.id}_pull_btn",
          class: "card_pull_btn",
        )
      %>
      <% end %>
    </td>
  <% end # content_tag_for %>
<% end # present %>
