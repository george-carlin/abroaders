<% if local_assigns[:name] %>
  <% possessive = "#{name}'s" %>
  <% be         = "is"   %>
  <% _do        = "does" %>
<% else %>
  <% name       = "you"  %>
  <% possessive = "your" %>
  <% be         = "are"  %>
  <% _do        = "do"   %>
<% end %>

<div class="spending-info-fields">
  <div class="form-group required">
    <%= f.label(
      :credit_score,
      "What's #{possessive} credit score?"
    ) %>

    <p class="help-block">
      The credit score should be a number between
      <%= SpendingInfo::MINIMUM_CREDIT_SCORE %> and
      <%= SpendingInfo::MAXIMUM_CREDIT_SCORE %>
    </p>

    <%= f.number_field :credit_score %>
  </div>

  <div class="form-group">

    <%= f.label(
      :will_apply_for_loan,
      "#{_do.capitalize} #{name} plan to apply for a loan of over $5,000 in the next 12 months?"
    ) %>

    <div class="radio">
      <label>
        <%= f.radio_button(
              :will_apply_for_loan,
              true,
              checked: f.object.will_apply_for_loan
            ) %>
        Yes
      </label>
    </div>

    <div class="radio">
      <label>
        <%= f.radio_button(
              :will_apply_for_loan,
              false,
              checked: !f.object.will_apply_for_loan
            ) %>
        No
      </label>
    </div>
  </div>

  <% if show_personal_spending %>
    <div class="form-group required">
      <%= f.label(
        :personal_spending,
        "What is #{possessive} normal personal spending per month?"
      ) %>

      <div class="input-group">
        <div class="input-group-addon">$</div>
        <%= f.number_field :personal_spending %>
      </div>
    </div>
  <% end %>

  <div class="form-group">
    <%= f.label(
      :has_business,
      "#{_do.capitalize} #{name} have a business?"
    ) %>

    <% SpendingInfo.has_businesses.each do |value, _| %>
      <div class="radio">
        <label>
          <%= f.radio_button(
                :has_business,
                value,
                checked: f.object.has_business == value
              ) %>
          <%= has_business_label_text(value, name) %>
        </label>
      </div>
    <% end %>
  </div>

  <div
    class="business_spending_form_group form-group required"
    style="display:none"
  >
    <%= f.label(
      :business_spending,
      "What is the average monthly spending of #{possessive} business?"
    ) %>

    <div class="input-group">
      <div class="input-group-addon">$</div>
      <%= f.number_field :business_spending %>
    </div>
  </div>
</div>
